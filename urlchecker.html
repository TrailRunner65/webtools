<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-093YBG598G"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-093YBG598G');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Internal Link Checker</title>
  <meta name="description" content="Internal RunCalcs tool for checking site URLs, redirects, and link status before publishing updates." />
  <meta name="robots" content="noindex,nofollow" />
  <link rel="canonical" href="https://runcalcs.com/urlchecker.html" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }

    .input-section {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      margin-bottom: 30px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #e0e0e0;
    }

    .tab {
      padding: 15px 30px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      color: #666;
      transition: all 0.3s;
    }

    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    input[type="url"], textarea {
      flex: 1;
      padding: 15px 20px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      font-family: inherit;
      transition: border-color 0.3s;
    }

    textarea {
      min-height: 200px;
      resize: vertical;
    }

    input[type="url"]:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    button {
      padding: 15px 40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .info-box {
      background: #e3f2fd;
      border: 2px solid #2196f3;
      border-radius: 10px;
      padding: 15px;
      margin-top: 15px;
      color: #1565c0;
      font-size: 14px;
    }

    .info-box strong {
      display: block;
      margin-bottom: 5px;
    }

    .status {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      text-align: center;
      font-size: 1.1em;
      color: #666;
    }

    .results {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .stat-card.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .stat-card.success {
      background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
    }

    .stat-card.error {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }

    .stat-card h3 {
      font-size: 2em;
      margin-bottom: 5px;
    }

    .stat-card p {
      color: inherit;
      opacity: 0.9;
      font-weight: 500;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .action-btn {
      padding: 10px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }

    .action-btn:hover {
      background: #5568d3;
    }

    .links-list {
      margin-top: 20px;
    }

    .link-item {
      display: flex;
      align-items: center;
      padding: 15px;
      margin-bottom: 10px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #667eea;
      transition: all 0.3s;
    }

    .link-item:hover {
      background: #e9ecef;
      transform: translateX(5px);
    }

    .link-item.tested {
      border-left-color: #84fab0;
      background: #f0fff4;
    }

    .link-item.broken {
      border-left-color: #fa709a;
      background: #fff5f7;
    }

    .status-icon {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-weight: bold;
      flex-shrink: 0;
      background: #667eea;
      color: white;
    }

    .link-item.tested .status-icon {
      background: #84fab0;
    }

    .link-item.broken .status-icon {
      background: #fa709a;
    }

    .link-content {
      flex: 1;
      min-width: 0;
    }

    .link-url {
      word-break: break-all;
      color: #333;
      margin-bottom: 3px;
      font-weight: 500;
    }

    .link-url a {
      color: #667eea;
      text-decoration: none;
    }

    .link-url a:hover {
      text-decoration: underline;
    }

    .link-count {
      font-size: 0.85em;
      color: #666;
    }

    .link-actions {
      display: flex;
      gap: 5px;
      margin-left: 15px;
    }

    .test-btn, .mark-btn {
      padding: 8px 15px;
      font-size: 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }

    .test-btn {
      background: #667eea;
      color: white;
    }

    .test-btn:hover {
      background: #5568d3;
    }

    .mark-btn {
      background: #e0e0e0;
      color: #666;
    }

    .mark-btn:hover {
      background: #d0d0d0;
    }

    .mark-btn.working {
      background: #84fab0;
      color: white;
    }

    .mark-btn.broken {
      background: #fa709a;
      color: white;
    }

    .hidden {
      display: none;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>üîó Internal Link Checker</h1>
    <p>Extract and test internal links from any webpage</p>
  </div>

  <div class="input-section">
    <div class="tabs">
      <button class="tab active" onclick="switchTab('fetch')">Fetch from URL</button>
      <button class="tab" onclick="switchTab('paste')">Paste HTML</button>
    </div>

    <div id="fetchTab" class="tab-content active">
      <div class="input-group">
        <input type="url" id="urlInput" placeholder="https://example.com" required>
        <button onclick="fetchAndExtract()">Extract Links</button>
      </div>
      <div class="info-box">
        <strong>‚ÑπÔ∏è How it works:</strong>
        Enter a URL to extract all internal links. Due to browser security, this tool can't automatically verify if links work. Instead, you can manually test each link and mark them as working or broken.
      </div>
    </div>

    <div id="pasteTab" class="tab-content">
      <textarea id="htmlInput" placeholder="Paste your HTML code here..."></textarea>
      <div class="input-group" style="margin-top: 10px;">
        <input type="url" id="baseUrlInput" placeholder="Base URL (e.g., https://example.com)" required>
        <button onclick="extractFromHTML()">Extract Links</button>
      </div>
      <div class="info-box">
        <strong>‚ÑπÔ∏è Alternative method:</strong>
        Right-click on any webpage, select "View Page Source", copy the HTML, and paste it here. Provide the base URL so relative links can be resolved correctly.
      </div>
    </div>
  </div>

  <div id="statusSection" class="status hidden">
    <div class="spinner"></div>
    <p id="statusText" style="margin-top: 20px;">Loading...</p>
  </div>

  <div id="resultsSection" class="results hidden">
    <h2 style="margin-bottom: 20px; color: #333;">Results</h2>

    <div class="stats">
      <div class="stat-card primary">
        <h3 id="totalLinks">0</h3>
        <p>Total Internal Links</p>
      </div>
      <div class="stat-card success">
        <h3 id="testedWorking">0</h3>
        <p>Marked as Working</p>
      </div>
      <div class="stat-card error">
        <h3 id="testedBroken">0</h3>
        <p>Marked as Broken</p>
      </div>
    </div>

    <div class="action-buttons">
      <button class="action-btn" onclick="testAllLinks()">üöÄ Open All in New Tabs</button>
      <button class="action-btn" onclick="copyAllLinks()">üìã Copy All Links</button>
      <button class="action-btn" onclick="exportResults()">üíæ Export Results</button>
    </div>

    <div class="links-list" id="linksList"></div>
  </div>
</div>

<script>
  let links = {};
  let linkCounts = {};

  function switchTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

    if (tab === 'fetch') {
      document.querySelector('.tab:first-child').classList.add('active');
      document.getElementById('fetchTab').classList.add('active');
    } else {
      document.querySelector('.tab:last-child').classList.add('active');
      document.getElementById('pasteTab').classList.add('active');
    }
  }

  async function fetchAndExtract() {
    const url = document.getElementById('urlInput').value.trim();

    if (!url) {
      alert('Please enter a URL');
      return;
    }

    try {
      new URL(url);
    } catch {
      alert('Please enter a valid URL');
      return;
    }

    document.getElementById('statusSection').classList.remove('hidden');
    document.getElementById('resultsSection').classList.add('hidden');
    document.getElementById('statusText').textContent = 'Fetching page...';

    try {
      const response = await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`);
      const html = await response.text();

      extractLinks(html, url);
    } catch (error) {
      document.getElementById('statusSection').classList.add('hidden');
      alert('Could not fetch the page. Try the "Paste HTML" method instead:\n\n1. Visit the website\n2. Right-click and select "View Page Source"\n3. Copy all the HTML\n4. Paste it in the "Paste HTML" tab');
    }
  }

  function extractFromHTML() {
    const html = document.getElementById('htmlInput').value.trim();
    const baseUrl = document.getElementById('baseUrlInput').value.trim();

    if (!html) {
      alert('Please paste HTML code');
      return;
    }

    if (!baseUrl) {
      alert('Please enter a base URL');
      return;
    }

    try {
      new URL(baseUrl);
    } catch {
      alert('Please enter a valid base URL');
      return;
    }

    document.getElementById('statusSection').classList.remove('hidden');
    document.getElementById('resultsSection').classList.add('hidden');
    document.getElementById('statusText').textContent = 'Extracting links...';

    extractLinks(html, baseUrl);
  }

  function extractLinks(html, baseUrl) {
    links = {};
    linkCounts = {};

    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const anchors = doc.querySelectorAll('a[href]');
    const base = new URL(baseUrl);

    anchors.forEach(link => {
      let href = link.getAttribute('href');

      if (!href || href.startsWith('#') || href.startsWith('javascript:') ||
              href.startsWith('mailto:') || href.startsWith('tel:')) {
        return;
      }

      try {
        const linkUrl = new URL(href, baseUrl);

        if (linkUrl.hostname === base.hostname) {
          const normalizedUrl = linkUrl.href;
          if (!links[normalizedUrl]) {
            links[normalizedUrl] = { status: 'untested' };
            linkCounts[normalizedUrl] = 1;
          } else {
            linkCounts[normalizedUrl]++;
          }
        }
      } catch (e) {
        // Invalid URL
      }
    });

    const count = Object.keys(links).length;

    if (count === 0) {
      document.getElementById('statusSection').classList.add('hidden');
      alert('No internal links found');
      return;
    }

    displayResults();
  }

  function displayResults() {
    document.getElementById('statusSection').classList.add('hidden');
    document.getElementById('resultsSection').classList.remove('hidden');

    updateStats();
    renderLinks();
  }

  function updateStats() {
    const total = Object.keys(links).length;
    const working = Object.values(links).filter(l => l.status === 'working').length;
    const broken = Object.values(links).filter(l => l.status === 'broken').length;

    document.getElementById('totalLinks').textContent = total;
    document.getElementById('testedWorking').textContent = working;
    document.getElementById('testedBroken').textContent = broken;
  }

  function renderLinks() {
    const linksList = document.getElementById('linksList');
    linksList.innerHTML = '';

    Object.keys(links).sort().forEach(url => {
      const item = document.createElement('div');
      item.className = `link-item ${links[url].status === 'working' ? 'tested' : ''} ${links[url].status === 'broken' ? 'broken' : ''}`;
      item.id = `link-${btoa(url).replace(/[^a-zA-Z0-9]/g, '')}`;

      const icon = document.createElement('div');
      icon.className = 'status-icon';
      if (links[url].status === 'working') {
        icon.textContent = '‚úì';
      } else if (links[url].status === 'broken') {
        icon.textContent = '‚úó';
      } else {
        icon.textContent = '‚óã';
      }

      const content = document.createElement('div');
      content.className = 'link-content';

      const urlDiv = document.createElement('div');
      urlDiv.className = 'link-url';
      const linkAnchor = document.createElement('a');
      linkAnchor.href = url;
      linkAnchor.target = '_blank';
      linkAnchor.textContent = url;
      urlDiv.appendChild(linkAnchor);

      const count = document.createElement('div');
      count.className = 'link-count';
      count.textContent = `Found ${linkCounts[url]} time${linkCounts[url] > 1 ? 's' : ''} on page`;

      content.appendChild(urlDiv);
      content.appendChild(count);

      const actions = document.createElement('div');
      actions.className = 'link-actions';

      const testBtn = document.createElement('button');
      testBtn.className = 'test-btn';
      testBtn.textContent = 'Test';
      testBtn.onclick = () => window.open(url, '_blank');

      const workingBtn = document.createElement('button');
      workingBtn.className = `mark-btn ${links[url].status === 'working' ? 'working' : ''}`;
      workingBtn.textContent = '‚úì Works';
      workingBtn.onclick = () => markLink(url, 'working');

      const brokenBtn = document.createElement('button');
      brokenBtn.className = `mark-btn ${links[url].status === 'broken' ? 'broken' : ''}`;
      brokenBtn.textContent = '‚úó Broken';
      brokenBtn.onclick = () => markLink(url, 'broken');

      actions.appendChild(testBtn);
      actions.appendChild(workingBtn);
      actions.appendChild(brokenBtn);

      item.appendChild(icon);
      item.appendChild(content);
      item.appendChild(actions);
      linksList.appendChild(item);
    });
  }

  function markLink(url, status) {
    links[url].status = status;
    updateStats();
    renderLinks();
  }

  function testAllLinks() {
    const urls = Object.keys(links);
    if (urls.length > 10) {
      if (!confirm(`This will open ${urls.length} tabs. Continue?`)) {
        return;
      }
    }
    urls.forEach(url => window.open(url, '_blank'));
  }

  function copyAllLinks() {
    const urls = Object.keys(links).join('\n');
    navigator.clipboard.writeText(urls).then(() => {
      alert('All links copied to clipboard!');
    });
  }

  function exportResults() {
    const results = Object.keys(links).map(url => ({
      url: url,
      occurrences: linkCounts[url],
      status: links[url].status
    }));

    const csv = 'URL,Occurrences,Status\n' +
            results.map(r => `"${r.url}",${r.occurrences},${r.status}`).join('\n');

    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'link-check-results.csv';
    a.click();
    URL.revokeObjectURL(url);
  }
</script>
</body>
</html>
